import{Midy}from"https://cdn.jsdelivr.net/gh/marmooo/midy@0.4.4/dist/midy.min.js";import{MIDIPlayer}from"./midi-player.js";import hljs from"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/es/highlight.min.js";import javascript from"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/es/languages/javascript.min.js";import css from"https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/es/languages/css.min.js";const highlightjsURL="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.11.1/build/styles/",lightThemeURL=highlightjsURL+"default.min.css",darkThemeURL=highlightjsURL+"dark.min.css";function loadConfig(){localStorage.getItem("darkMode")==1?(document.documentElement.setAttribute("data-bs-theme","dark"),document.getElementById("highlight-theme").href=darkThemeURL):document.getElementById("highlight-theme").href=lightThemeURL}function toggleDarkMode(){localStorage.getItem("darkMode")==1?(localStorage.setItem("darkMode",0),document.documentElement.setAttribute("data-bs-theme","light"),document.getElementById("highlight-theme").href=lightThemeURL):(localStorage.setItem("darkMode",1),document.documentElement.setAttribute("data-bs-theme","dark"),document.getElementById("highlight-theme").href=darkThemeURL)}function applyTheme(e){const t=e.root;for(const e of t.getElementsByClassName("midi-player-btn"))e.classList.add("btn","btn-light","p-1");for(const e of t.getElementsByClassName("midi-player-text"))e.classList.add("p-1");for(const e of t.getElementsByClassName("midi-player-range"))e.classList.add("form-range","p-1");for(const e of t.getElementsByClassName("volume"))e.classList.add("w-auto")}function arrangeLayout(e){const t=e.row();t.appendChild(e.playPauseResume()),t.appendChild(e.seekBar())}async function simpleTest(){const e=new AudioContext;e.state==="running"&&await e.suspend();const n=new Midy(e),t=new MIDIPlayer(n);t.defaultLayout(),document.getElementById("simpleTest").appendChild(t.root),await t.loadMIDI("midi/travel.mid")}async function stylingTest(){const t=new AudioContext;t.state==="running"&&await t.suspend();const n=new Midy(t),e=new MIDIPlayer(n);e.defaultLayout(),applyTheme(e),document.getElementById("stylingTest").appendChild(e.root),await e.loadMIDI("midi/hitogo2.mid")}async function arrangingTest(){const t=new AudioContext;t.state==="running"&&await t.suspend();const n=new Midy(t),e=new MIDIPlayer(n);arrangeLayout(e),applyTheme(e),document.getElementById("arrangingTest").appendChild(e.root),await e.loadMIDI("midi/0002.mid")}loadConfig(),hljs.registerLanguage("javascript",javascript),hljs.registerLanguage("css",css),hljs.highlightAll(),simpleTest(),stylingTest(),arrangingTest(),document.getElementById("toggleDarkMode").onclick=toggleDarkMode